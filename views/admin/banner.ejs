<%- include('../layouts/header') %>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css">
<main id="main" class="main">
    <div class="pagetitle mt-3">
      <h1>Banner</h1>
    </div><!-- End Page Title -->

    <section class="mt-5">

        <form id="bannerForm" action="/admin/saveBanner" method="post" enctype="multipart/form-data">
            <fieldset >
                
                  <div class="mb-3">
                    <select name="category"  class="form-select" aria-label="Default select example">
                        <option selected>Select the Category</option>
                        <% categories.forEach(category=>{ %>
                            <option value="<%= category._id %>">
                              <%= category.categoryName %>
                            </option>
                            <% }) %>
                      </select>
                  </div>      
                  <div class=" input-group mb-3">  
                
                    <input type="file" name="bannerImage" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="button-addon2" accept="image/*">
                    
               
                </div>
                <div class=" input-group mb-3">
                    <button class="btn btn-primary" type="submit">Add Banner</button>
                </div>
            </fieldset>
        </form>
    </section>
    <section>
        <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Image</th>
                    <th>Category</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Tiger Nixon</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    
                </tr>
                <tr>
                    <td>Garrett Winters</td>
                    <td>Tokyo</td>
                    <td>63</td>
                   
                </tr>
                <tr>
                    <td>Ashton Cox</td>
                    <td>San Francisco</td>
                    <td>66</td>
                   
                </tr>
                <tr>
                    <td>Cedric Kelly</td>
                    <td>Edinburgh</td>
                    <td>22</td>
                    
                </tr>
                <tr>
                    <td>Airi Satou</td>
                    <td>Tokyo</td>
                    <td>33</td>
                    
                </tr>
                <tr>
                    <td>Brielle Williamson</td>
                    <td>Integration Specialist</td>
                    <td>61</td>
                    
                </tr>
                
               
            </tbody>
            <tfoot>
               
            </tfoot>
        </table>
    </section>
</main>

<script>
    new DataTable('#example');
</script>

<!-- <script>
    document.getElementById('bannerForm').addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent the form from actually submitting 

        const formData = new FormData(document.getElementById('bannerForm'));

        try {
            const response = await fetch('/admin/saveBanner', {
                method: 'POST',
                body: formData,
            });

             if (response.ok) {
                // Handle a successful response, e.g, display a success message or redirect to a success page

             } else {
                // Handle errors, e.g., display an error message to the user
             }
        } catch (error) {
            console.error(error);
        }
    })
</script> -->

<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>